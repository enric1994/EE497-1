<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="main.css" />
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript" src="Project/Tree.js"></script>
    <script type="text/javascript" src="Project/Sun.js"></script>
    <script type="text/javascript" src="Project/World.js"></script>
    <script type="text/javascript" src="Project/Button.js"></script>
    <script type="text/javascript" src="Project/Callbacks.js"></script>
    <script type="text/javascript" src="Project/Moon.js"></script>
    <script type="text/javascript">

var state = 0;

function init() {
    enablePicking();
    // disableDefaultLight();

}

  function createScene() {
    var root = new osg.Node();

    //Transform that modify all objects rotation
    var globalRotation = new osg.MatrixTransform();
    
    //Offset all the objects position
    var globalTranslationMatrix  = new osg.Matrix.create();
    globalTranslationMatrix = osg.Matrix.makeTranslate( 0,0,-18, globalTranslationMatrix);
    var globalTranslation = new osg.MatrixTransform();
    globalTranslation.setMatrix(globalTranslationMatrix);

    //Rotate and then translate
    root.addChild(globalRotation);
    globalRotation.addChild(globalTranslation);

    var objectsRotation = new osg.MatrixTransform();
    globalTranslation.addChild(objectsRotation);

    //Create world
    world = new World(objectsRotation, 30);
    world.create();

    //Create trees (summer)
    tree1 = new Tree(objectsRotation,
    3,8,15,
    0, 0, 1, 0.3,
    0.6,0.3,0.1,
    0.1,0.8,0.3);
    tree2 = new Tree(objectsRotation,
    -5,-8,15,
    0,0, 1, -0.6,
    0.6,0.3,0.1,
    0.1,0.8,0.3);
    tree3 = new Tree(objectsRotation,
    12,3,15,
    0,0, 1, 2,
    0.6,0.3,0.1,
    0.1,0.8,0.3);
    tree4 = new Tree(objectsRotation,
    -13,7,15,
    0,0, 1, 3,
    0.6,0.3,0.1,
    0.1,0.8,0.3);
    tree5 = new Tree(objectsRotation,
    -8,2,15,
    0,0, 2, 3.2,
    0.6,0.3,0.1,
    0.1,0.8,0.3);
    tree6 = new Tree(objectsRotation,
    -13,4,15,
    0,0, 1, 1,
    0.6,0.3,0.1,
    0.1,0.8,0.3);
    tree7 = new Tree(objectsRotation,
    -3,7,15,
    0,0, 1, 3.3 ,
    0.6,0.3,0.1,
    0.1,0.8,0.3);

    tree1.create();
    tree2.create();
    tree3.create();
    tree4.create();
    tree5.create();
    tree6.create();
    tree7.create();

    //Create Sun
    sun = new Sun(objectsRotation,
    -3,17,30, 7);

    sun.create();

    //Create Moon
    moon = new Moon(objectsRotation,0,8,-30, Math.PI/2, 0, 1, 0);
    moon.create();

    // //Create text1
    // text1(objectsRotation,0,0,15, 0,0, 0, 0, 0);

    
    //Create spin button
    button = new Button(root);
    button.create();

    // Callback to rotate the world
    var rotateCallback = new WorldRotateCallback();
    objectsRotation.addUpdateCallback(rotateCallback);


    return root;
}
    

    </script>
</head>

<body>
<canvas id="canvas" tabindex="1"></canvas>
</body>
</html>